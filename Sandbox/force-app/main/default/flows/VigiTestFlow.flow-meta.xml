<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Redirect_to_Sales_Order_Poster</name>
        <label>Redirect to Sales Order Poster</label>
        <locationX>578</locationX>
        <locationY>1334</locationY>
        <actionName>c:OvcRedirectToSOPoster</actionName>
        <actionType>component</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>detailComponentName</name>
            <value>
                <elementReference>detailComponentName</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>slpParamsDetailJSON</name>
            <value>
                <elementReference>slpParamsDetail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>slpParamsJSON</name>
            <value>
                <elementReference>slpParamsPoster</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>mode</name>
            <value>
                <elementReference>posterMode</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>componentName</name>
            <value>
                <elementReference>ZOR_SALES_ORDER_POSTER</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Assign_params_for_Sales_Order_Poster</name>
        <label>Assign params for Sales Order Poster</label>
        <locationX>842</locationX>
        <locationY>1118</locationY>
        <assignmentItems>
            <assignToReference>slpParamsPoster</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{&quot;cmpOpts&quot;:{&quot;mode&quot;:&quot;{!posterMode}&quot;}}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Redirect_to_Sales_Order_Poster</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_params_for_Sales_Order_Poster_0</name>
        <label>Assign params for Sales Order Poster</label>
        <locationX>50</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>slpParamsPoster</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{&quot;ORDER_HEADER_IN&quot;:{&quot;DOC_TYPE&quot;:&quot;{!selectedDocType}&quot;}}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Redirect_to_Sales_Order_Poster</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_selected_document_type</name>
        <label>Assign selected document type</label>
        <locationX>578</locationX>
        <locationY>758</locationY>
        <assignmentItems>
            <assignToReference>selectedDocType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>choose_document_type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_selected_document_type</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>ZOR_type</name>
        <choiceText>ZOR : Basic Sales Order</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ZOR</stringValue>
        </value>
    </choices>
    <choices>
        <name>ZQT_type</name>
        <choiceText>ZQT : Basic Sales Order with reference to Quotation</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ZQT</stringValue>
        </value>
    </choices>
    <choices>
        <name>ZRE_type</name>
        <choiceText>ZRE : Sales Return with reference to Invoice</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ZRE</stringValue>
        </value>
    </choices>
    <choices>
        <name>ZRET_type</name>
        <choiceText>ZRET : Sales Return without reference</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ZRET</stringValue>
        </value>
    </choices>
    <constants>
        <name>DETAIL_COMPONENT_ZQT</name>
        <dataType>String</dataType>
        <value>
            <stringValue>sapSalesOrderDetailsCase</stringValue>
        </value>
    </constants>
    <constants>
        <name>DETAIL_COMPONENT_ZRE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>ovcSAPInvoiceDetailsZRE</stringValue>
        </value>
    </constants>
    <constants>
        <name>ZOR_SALES_ORDER_POSTER</name>
        <dataType>String</dataType>
        <value>
            <stringValue>SAPSalesOrderCreateZOR</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Check_selected_document_type</name>
        <label>Check selected document type</label>
        <locationX>578</locationX>
        <locationY>878</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ZOR_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>choose_document_type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ZOR_type</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_params_for_Sales_Order_Poster_0</targetReference>
            </connector>
            <label>ZOR selected</label>
        </rules>
        <rules>
            <name>ZQT_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>choose_document_type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ZQT_type</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Run_Basic_Order_Creation_with_Quotation_reference</targetReference>
            </connector>
            <label>ZQT selected</label>
        </rules>
        <rules>
            <name>ZRE_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>choose_document_type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ZRE_type</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Create_SAP_Sales_Return</targetReference>
            </connector>
            <label>ZRE selected</label>
        </rules>
        <rules>
            <name>ZRET_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>choose_document_type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ZRET_type</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_SAP_Sales_Return</targetReference>
            </connector>
            <label>ZRET selected</label>
        </rules>
    </decisions>
    <formulas>
        <name>detailComponentName</name>
        <dataType>String</dataType>
        <expression>IF ( {!ZRE_selected}, {!DETAIL_COMPONENT_ZRE}, IF ( {!ZQT_selected}, {!DETAIL_COMPONENT_ZQT} , &apos;&apos; ) )</expression>
    </formulas>
    <formulas>
        <name>posterMode</name>
        <dataType>String</dataType>
        <expression>IF ( OR ( {!ZRE_selected}, {!ZQT_selected} ), &apos;Clone&apos;, &apos;Create&apos; )</expression>
    </formulas>
    <interviewLabel>VigiTestFlow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>VigiTestFlow</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <screens>
        <name>Document_Type_Selection</name>
        <label>Document Type Selection</label>
        <locationX>578</locationX>
        <locationY>158</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>test1</targetReference>
        </connector>
        <fields>
            <name>choose_document_type</name>
            <choiceReferences>ZOR_type</choiceReferences>
            <choiceReferences>ZQT_type</choiceReferences>
            <choiceReferences>ZRE_type</choiceReferences>
            <choiceReferences>ZRET_type</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Please choose the document type</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>test1</name>
        <label>test1</label>
        <locationX>578</locationX>
        <locationY>278</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>testWO</targetReference>
        </connector>
        <fields>
            <name>testUsingHostComp2</name>
            <extensionName>overcast:ocfSelectionApplierForScreenFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>componentDefName</name>
                <value>
                    <stringValue>ShipToSearchWithAddress</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>recordId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>TestSearch</name>
            <extensionName>c:ShipToSearchWithAddressForScreenFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>recordId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>test2</name>
        <label>test2</label>
        <locationX>578</locationX>
        <locationY>518</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>testSoldToUse</targetReference>
        </connector>
        <fields>
            <name>displayOutput</name>
            <fieldText>&lt;p&gt;{!testUsingHostComp2}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>testSoldToUse</name>
        <label>testSoldToUse</label>
        <locationX>578</locationX>
        <locationY>638</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign_selected_document_type</targetReference>
        </connector>
        <fields>
            <name>testsoldTo</name>
            <extensionName>overcast:ocfSelectionApplierForScreenFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>componentDefName</name>
                <value>
                    <stringValue>SalesOrderSoldToPartySearch</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>recordId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>testWO</name>
        <label>testWO</label>
        <locationX>578</locationX>
        <locationY>398</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>test2</targetReference>
        </connector>
        <fields>
            <name>testWOComp</name>
            <extensionName>c:ocfValueHelpForFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>componentDefName</name>
                <value>
                    <stringValue>ovcS4ShipToSelectorWorkOrder</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>recordId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Document_Type_Selection</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <subflows>
        <name>Create_SAP_Sales_Return</name>
        <label>Create SAP Sales Return</label>
        <locationX>842</locationX>
        <locationY>998</locationY>
        <connector>
            <targetReference>Assign_params_for_Sales_Order_Poster</targetReference>
        </connector>
        <flowName>Create_SAP_Sales_Return</flowName>
        <inputAssignments>
            <name>salesReturnType</name>
            <value>
                <elementReference>selectedDocType</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>slpParamsDetail</assignToReference>
            <name>slpParamsOutput</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>Run_Basic_Order_Creation_with_Quotation_reference</name>
        <label>Run Basic Order Creation with Quotation reference</label>
        <locationX>314</locationX>
        <locationY>998</locationY>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_params_for_Sales_Order_Poster</targetReference>
        </connector>
        <flowName>Case_Create_Basic_Sales_Order_with_Reference_to_Quotation</flowName>
        <outputAssignments>
            <assignToReference>slpParamsDetail</assignToReference>
            <name>slpParamsSub</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>selectedDocType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>shipToComponent</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>slpParamsDetail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>slpParamsPoster</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
